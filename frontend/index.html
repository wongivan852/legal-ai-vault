<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vault AI Platform - Multi-Domain Agentic AI</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-logo-section">
                    <img src="static/images/deepbase-logo.jpg" alt="Deepbase Logo" class="header-logo">
                    <div class="header-text">
                        <h1>ü§ñ Vault AI Platform</h1>
                        <p class="subtitle">Multi-Domain Agentic AI Platform - Legal | HR | Customer Service | Analysis</p>
                    </div>
                </div>
                <div class="health-status" id="healthStatus">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Checking status...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="agents">ü§ñ AI Agents</button>
                <button class="tab-btn" data-tab="workflows">üîÑ Workflows</button>
                <button class="tab-btn" data-tab="generate">üí¨ Text Generation</button>
                <button class="tab-btn" data-tab="models">ü§ñ Models</button>
                <button class="tab-btn" data-tab="docs">üìö API Docs</button>
            </div>

            <!-- Tab Content: AI Agents -->
            <div class="tab-content active" id="agents-tab">
                <div class="panel">
                    <h2>ü§ñ AI Agents - Specialized Domain Experts</h2>
                    <p class="panel-desc">Select an agent below to interact with specialized AI assistants</p>

                    <!-- Agent Sub-Tabs -->
                    <div class="agent-tabs">
                        <button class="agent-tab-btn active" data-agent="legal">‚öñÔ∏è Legal Research</button>
                        <button class="agent-tab-btn" data-agent="hr">üë• HR Policy</button>
                        <button class="agent-tab-btn" data-agent="cs">üí¨ Customer Service</button>
                        <button class="agent-tab-btn" data-agent="analysis">üìä Analysis</button>
                        <button class="agent-tab-btn" data-agent="synthesis">üîó Synthesis</button>
                        <button class="agent-tab-btn" data-agent="validation">‚öñÔ∏è Legal Validation</button>
                    </div>

                    <!-- Legal Research Agent -->
                    <div class="agent-content active" id="legal-agent">
                        <div class="agent-header">
                            <h3>‚öñÔ∏è Legal Research Agent</h3>
                            <p>Search 1,699 HK ordinances and get legal research assistance</p>
                        </div>
                        <form id="legalAgentForm" class="form">
                            <div class="form-group">
                                <label for="legalQuestion">Legal Question *</label>
                                <textarea
                                    id="legalQuestion"
                                    class="textarea-field"
                                    rows="4"
                                    required
                                    placeholder="Example: What are the director duties under the Companies Ordinance?"
                                ></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="legalAgentBtn">
                                    <span class="btn-text">üîç Research Legal Question</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Researching...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearLegal">Clear</button>
                            </div>
                        </form>
                        <div id="legalAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- HR Policy Agent -->
                    <div class="agent-content" id="hr-agent">
                        <div class="agent-header">
                            <h3>üë• HR Policy Agent</h3>
                            <p>Get answers about HR policies, benefits, and employee procedures</p>
                        </div>
                        <form id="hrAgentForm" class="form">
                            <div class="form-group">
                                <label for="hrQuestion">HR Question *</label>
                                <textarea
                                    id="hrQuestion"
                                    class="textarea-field"
                                    rows="3"
                                    required
                                    placeholder="Example: How many vacation days do employees get after 3 years?"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="hrContext">Policy Context (Optional)</label>
                                <textarea
                                    id="hrContext"
                                    class="textarea-field"
                                    rows="6"
                                    placeholder="Paste your HR policy documents here. Example:&#10;&#10;VACATION POLICY: New employees receive 10 days. After 1 year: 15 days. After 3 years: 20 days. After 5 years: 25 days. Vacation requests require 2 weeks advance notice and manager approval."
                                ></textarea>
                                <small class="form-hint">üí° Tip: Paste your employee handbook or policy documents here for accurate answers</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="hrAgentBtn">
                                    <span class="btn-text">üíº Get HR Answer</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Analyzing policy...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearHR">Clear</button>
                            </div>
                        </form>
                        <div id="hrAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Customer Service Agent -->
                    <div class="agent-content" id="cs-agent">
                        <div class="agent-header">
                            <h3>üí¨ Customer Service Agent</h3>
                            <p>Get support answers based on your documentation and FAQs</p>
                        </div>
                        <form id="csAgentForm" class="form">
                            <div class="form-group">
                                <label for="csQuestion">Support Question *</label>
                                <textarea
                                    id="csQuestion"
                                    class="textarea-field"
                                    rows="3"
                                    required
                                    placeholder="Example: How do I reset my password?"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="csContext">Support Documentation (Optional)</label>
                                <textarea
                                    id="csContext"
                                    class="textarea-field"
                                    rows="6"
                                    placeholder="Paste your support documentation or FAQs here. Example:&#10;&#10;PASSWORD RESET: 1. Go to login page 2. Click Forgot Password 3. Enter your email 4. Check email for reset link (valid 24 hours) 5. Click link and create new password 6. Password must be 8+ characters with uppercase, lowercase, and numbers."
                                ></textarea>
                                <small class="form-hint">üí° Tip: Paste FAQs, user guides, or troubleshooting docs for better answers</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="csAgentBtn">
                                    <span class="btn-text">üé´ Get Support Answer</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Finding solution...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearCS">Clear</button>
                            </div>
                        </form>
                        <div id="csAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Analysis Agent -->
                    <div class="agent-content" id="analysis-agent">
                        <div class="agent-header">
                            <h3>üìä Analysis Agent</h3>
                            <p>Extract insights, trends, and actionable recommendations from text</p>
                        </div>
                        <form id="analysisAgentForm" class="form">
                            <div class="form-group">
                                <label for="analysisText">Text to Analyze *</label>
                                <textarea
                                    id="analysisText"
                                    class="textarea-field"
                                    rows="8"
                                    required
                                    placeholder="Example: Q4 2024 Performance Summary: Revenue increased 25% to $5.2M compared to Q3. New product line contributed $2.1M (40% of revenue). Expanded to APAC, EU, and LATAM markets. Customer retention improved from 65% to 78%..."
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="analysisFocus">Analysis Focus (Optional)</label>
                                <input
                                    type="text"
                                    id="analysisFocus"
                                    class="input-field"
                                    placeholder="Example: Identify key performance indicators and trends"
                                >
                                <small class="form-hint">üí° Tip: Specify what you want to focus on (e.g., "trends", "risks", "opportunities")</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="analysisAgentBtn">
                                    <span class="btn-text">üìà Analyze</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Analyzing...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearAnalysis">Clear</button>
                            </div>
                        </form>
                        <div id="analysisAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Synthesis Agent -->
                    <div class="agent-content" id="synthesis-agent">
                        <div class="agent-header">
                            <h3>üîó Synthesis Agent</h3>
                            <p>Combine information from multiple sources into comprehensive insights</p>
                        </div>
                        <form id="synthesisAgentForm" class="form">
                            <!-- Auto-Retrieve Toggle -->
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="synthesisAutoRetrieve" style="width: 20px; height: 20px; cursor: pointer;">
                                    <span style="font-weight: 600;">üîç Auto-retrieve documents from Legal Database</span>
                                </label>
                                <small class="form-hint">üí° Enable to automatically search and retrieve relevant legal documents from the 1,699 HK ordinances database</small>
                            </div>

                            <!-- Auto-Retrieve Options (shown when toggle is enabled) -->
                            <div id="synthesisAutoRetrieveOptions" style="display: none; padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label for="synthesisQueries">Search Queries *</label>
                                    <textarea
                                        id="synthesisQueries"
                                        class="textarea-field"
                                        rows="3"
                                        placeholder="Enter search queries (one per line). Example:&#10;director duties in Hong Kong&#10;company secretary responsibilities&#10;corporate governance requirements"
                                    ></textarea>
                                    <small class="form-hint">üí° Enter multiple search queries to find relevant sections from different legal topics</small>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="synthesisTopK">Documents per Query</label>
                                        <input
                                            type="number"
                                            id="synthesisTopK"
                                            class="input-field"
                                            value="5"
                                            min="1"
                                            max="20"
                                        >
                                        <small class="form-hint">How many documents to retrieve per query</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="synthesisMinScore">Min Relevance Score</label>
                                        <input
                                            type="number"
                                            id="synthesisMinScore"
                                            class="input-field"
                                            value="0.6"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                        >
                                        <small class="form-hint">Minimum similarity score (0-1, higher = stricter)</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Manual Source Input (hidden when auto-retrieve is enabled) -->
                            <div id="synthesisManualSources">
                                <div class="form-group">
                                    <label>Source Documents *</label>
                                    <div id="synthesisSourcesContainer">
                                        <div class="synthesis-source">
                                            <input type="text" class="input-field source-title" placeholder="Source 1 Title (e.g., Customer Survey)" required>
                                            <textarea class="textarea-field source-content" rows="4" placeholder="Source 1 Content" required></textarea>
                                        </div>
                                        <div class="synthesis-source">
                                            <input type="text" class="input-field source-title" placeholder="Source 2 Title (e.g., App Store Reviews)" required>
                                            <textarea class="textarea-field source-content" rows="4" placeholder="Source 2 Content" required></textarea>
                                        </div>
                                        <div class="synthesis-source">
                                            <input type="text" class="input-field source-title" placeholder="Source 3 Title (e.g., Support Tickets)">
                                            <textarea class="textarea-field source-content" rows="4" placeholder="Source 3 Content (optional)"></textarea>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-secondary" id="addSource" style="margin-top: 10px;">+ Add Another Source</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="synthesisFocus">Synthesis Focus (Optional)</label>
                                <input
                                    type="text"
                                    id="synthesisFocus"
                                    class="input-field"
                                    placeholder="Example: Create comprehensive product improvement plan"
                                >
                                <small class="form-hint">üí° Tip: What should the synthesis focus on? (e.g., "action items", "common themes")</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="synthesisAgentBtn">
                                    <span class="btn-text">üîó Synthesize</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Synthesizing...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearSynthesis">Clear</button>
                            </div>
                        </form>
                        <div id="synthesisAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Validation Agent -->
                    <div class="agent-content" id="validation-agent">
                        <div class="agent-header">
                            <h3>‚úÖ Legal Validation Agent</h3>
                            <p>Verify accuracy of legal content against Hong Kong ordinances and check legal compliance</p>
                        </div>

                        <!-- Warning Banner -->
                        <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="font-size: 24px;">‚öñÔ∏è</span>
                                <div>
                                    <strong style="color: #856404; font-size: 16px;">Legal Content Validation Only</strong>
                                    <p style="margin: 8px 0 0 0; color: #856404; line-height: 1.5;">
                                        This agent validates <strong>legal content</strong> (policies, contracts, legal claims) against Hong Kong ordinances.
                                        <br><strong>Not suitable for:</strong> Financial reports, business data, or non-legal content.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- What to Validate Section -->
                        <div style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 15px; margin-bottom: 20px; border-radius: 4px;">
                            <strong style="color: #1976D2;">‚úì Good Content to Validate:</strong>
                            <ul style="margin: 10px 0 0 20px; line-height: 1.8; color: #1565C0;">
                                <li><strong>Employee Handbooks</strong> - Check compliance with Employment Ordinance</li>
                                <li><strong>Privacy Policies</strong> - Verify against PDPO (Personal Data Privacy Ordinance)</li>
                                <li><strong>Contract Clauses</strong> - Validate legal accuracy of agreements</li>
                                <li><strong>Legal Claims</strong> - Check statements about HK law are correct</li>
                                <li><strong>Compliance Documents</strong> - Verify regulatory compliance</li>
                            </ul>
                        </div>

                        <form id="validationAgentForm" class="form">
                            <div class="form-group">
                                <label>Legal Content to Validate *</label>
                                <small class="form-hint" style="display: block; margin-bottom: 10px; color: #666;">
                                    üìù Enter legal content (policies, contracts, legal claims) to check against HK ordinances
                                </small>
                                <div id="validationDocsContainer">
                                    <div class="validation-doc">
                                        <input type="text" class="input-field doc-title" placeholder="Document Title (e.g., Employee Leave Policy)" required>
                                        <textarea class="textarea-field doc-content" rows="6" placeholder="Example: Employees are entitled to 7 days of annual leave after 12 months of service. Leave must be approved by supervisor 2 weeks in advance. Unused leave expires annually." required></textarea>
                                    </div>
                                    <div class="validation-doc" style="display: none;">
                                        <input type="text" class="input-field doc-title" placeholder="Document 2 Title (Optional)">
                                        <textarea class="textarea-field doc-content" rows="6" placeholder="Document 2 Content (optional)"></textarea>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary" id="addValidationDoc" style="margin-top: 10px;">+ Add Another Document</button>
                            </div>

                            <!-- Legal Examples -->
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                                <strong style="color: #495057;">üí° Example Legal Content:</strong>
                                <div style="margin-top: 10px; font-family: monospace; font-size: 13px; line-height: 1.6; color: #495057;">
                                    <details style="margin-bottom: 8px;">
                                        <summary style="cursor: pointer; color: #2196F3; font-weight: 500;">‚ñ∂ Privacy Policy Clause</summary>
                                        <div style="background: white; padding: 10px; margin-top: 5px; border-radius: 4px;">
                                            "We retain personal data for 7 years as required by Hong Kong law. Data is stored securely and only accessed by authorized personnel."
                                        </div>
                                    </details>
                                    <details style="margin-bottom: 8px;">
                                        <summary style="cursor: pointer; color: #2196F3; font-weight: 500;">‚ñ∂ Employment Contract Clause</summary>
                                        <div style="background: white; padding: 10px; margin-top: 5px; border-radius: 4px;">
                                            "Employee is entitled to statutory holidays, 7 days annual leave after 12 months, and sick leave as per Employment Ordinance."
                                        </div>
                                    </details>
                                    <details>
                                        <summary style="cursor: pointer; color: #2196F3; font-weight: 500;">‚ñ∂ Director Duties Statement</summary>
                                        <div style="background: white; padding: 10px; margin-top: 5px; border-radius: 4px;">
                                            "Company directors must act in good faith, exercise reasonable care and skill, and avoid conflicts of interest under Cap. 622."
                                        </div>
                                    </details>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="validationFocus">Validation Focus (Optional)</label>
                                <input
                                    type="text"
                                    id="validationFocus"
                                    class="input-field"
                                    placeholder="Example: Check compliance with Employment Ordinance (Cap. 57)"
                                >
                                <small class="form-hint">üí° Specify which ordinance or aspect to focus on (e.g., "PDPO compliance", "Cap. 622 accuracy")</small>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="validationAgentBtn">
                                    <span class="btn-text">‚öñÔ∏è Validate Legal Content</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Validating against HK ordinances...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearValidation">Clear</button>
                            </div>
                        </form>
                        <div id="validationAgentResult" class="result-panel" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Workflows -->
            <div class="tab-content" id="workflows-tab">
                <div class="panel">
                    <h2>üîÑ Multi-Agent Workflows</h2>
                    <p class="panel-desc">Orchestrated multi-step processes using multiple AI agents</p>

                    <!-- Workflow Sub-Tabs -->
                    <div class="agent-tabs">
                        <button class="agent-tab-btn active" data-workflow="hr_onboarding">üë• HR Onboarding</button>
                        <button class="agent-tab-btn" data-workflow="cs_ticket">üí¨ CS Ticket</button>
                        <button class="agent-tab-btn" data-workflow="legal_compliance">‚öñÔ∏è Legal Compliance</button>
                        <button class="agent-tab-btn" data-workflow="simple_qa">üí° Q&A Validation</button>
                        <button class="agent-tab-btn" data-workflow="multi_research">üîç Multi-Research</button>
                        <button class="agent-tab-btn" data-workflow="builder">üõ†Ô∏è Workflow Builder</button>
                    </div>

                    <!-- HR Onboarding Workflow -->
                    <div class="agent-content active" id="workflow-hr_onboarding">
                        <div class="agent-header">
                            <h3>üë• HR Employee Onboarding Workflow</h3>
                            <p>3-step workflow: HR Policy ‚Üí Analysis ‚Üí Personalized Guide</p>
                        </div>
                        <form id="hrOnboardingForm" class="form">
                            <div class="form-group">
                                <label for="onboardingEmployeeName">Employee Name</label>
                                <input type="text" id="onboardingEmployeeName" class="input-field" placeholder="e.g., John Doe">
                            </div>
                            <div class="form-group">
                                <label for="onboardingRole">Role/Position</label>
                                <input type="text" id="onboardingRole" class="input-field" placeholder="e.g., Software Engineer">
                            </div>
                            <div class="form-group">
                                <label for="onboardingQuestion">Onboarding Question (Optional)</label>
                                <textarea id="onboardingQuestion" class="textarea-field" rows="3" placeholder="What are the key onboarding steps for a new employee?"></textarea>
                                <small class="form-hint">Leave blank for general onboarding information</small>
                            </div>
                            <div class="form-group">
                                <label for="onboardingPolicies">HR Policies (Optional)</label>
                                <textarea id="onboardingPolicies" class="textarea-field" rows="5" placeholder="Paste your HR policies here for more accurate guidance..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <span class="btn-text">üöÄ Run Onboarding Workflow</span>
                                    <span class="btn-loading" style="display: none;"><span class="spinner"></span> Running workflow...</span>
                                </button>
                                <button type="button" class="btn btn-secondary clear-workflow">Clear</button>
                            </div>
                        </form>
                        <div id="hrOnboardingResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- CS Ticket Workflow -->
                    <div class="agent-content" id="workflow-cs_ticket">
                        <div class="agent-header">
                            <h3>üí¨ CS Ticket Response Workflow</h3>
                            <p>3-step workflow: CS Response ‚Üí Sentiment Analysis ‚Üí Polished Reply</p>
                        </div>
                        <form id="csTicketForm" class="form">
                            <div class="form-group">
                                <label for="ticketCustomerName">Customer Name</label>
                                <input type="text" id="ticketCustomerName" class="input-field" placeholder="e.g., Jane Smith">
                            </div>
                            <div class="form-group">
                                <label for="ticketQuery">Customer Query *</label>
                                <textarea id="ticketQuery" class="textarea-field" rows="4" required placeholder="How do I reset my password?"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="ticketDocs">Support Documentation (Optional)</label>
                                <textarea id="ticketDocs" class="textarea-field" rows="5" placeholder="Paste relevant support docs, FAQs, or troubleshooting guides..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <span class="btn-text">üé´ Run Ticket Workflow</span>
                                    <span class="btn-loading" style="display: none;"><span class="spinner"></span> Running workflow...</span>
                                </button>
                                <button type="button" class="btn btn-secondary clear-workflow">Clear</button>
                            </div>
                        </form>
                        <div id="csTicketResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Legal-HR Compliance Workflow -->
                    <div class="agent-content" id="workflow-legal_compliance">
                        <div class="agent-header">
                            <h3>‚öñÔ∏è Legal-HR Compliance Workflow</h3>
                            <p>3-step workflow: Legal Research ‚Üí Compliance Validation ‚Üí Report</p>
                        </div>
                        <form id="legalComplianceForm" class="form">
                            <div class="form-group">
                                <label for="complianceArea">Compliance Area *</label>
                                <input type="text" id="complianceArea" class="input-field" required placeholder="e.g., What are the legal requirements for employee leave policies in Hong Kong?">
                                <small class="form-hint">What legal requirement are you checking compliance with?</small>
                            </div>
                            <div class="form-group">
                                <label for="compliancePolicyName">Policy Name *</label>
                                <input type="text" id="compliancePolicyName" class="input-field" required placeholder="e.g., Annual Leave Policy">
                            </div>
                            <div class="form-group">
                                <label for="compliancePolicyContent">Policy Content *</label>
                                <textarea id="compliancePolicyContent" class="textarea-field" rows="8" required placeholder="Paste your HR policy content here&#10;&#10;Example: Employees receive 7 days annual leave after 12 months of service. Leave must be approved by manager 2 weeks in advance..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <span class="btn-text">‚öñÔ∏è Run Compliance Check</span>
                                    <span class="btn-loading" style="display: none;"><span class="spinner"></span> Running workflow...</span>
                                </button>
                                <button type="button" class="btn btn-secondary clear-workflow">Clear</button>
                            </div>
                        </form>
                        <div id="legalComplianceResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Simple Q&A Workflow -->
                    <div class="agent-content" id="workflow-simple_qa">
                        <div class="agent-header">
                            <h3>üí° Simple Q&A with Validation</h3>
                            <p>2-step workflow: Legal Research ‚Üí Answer Validation</p>
                        </div>
                        <form id="simpleQAForm" class="form">
                            <div class="form-group">
                                <label for="qaQuestion">Legal Question *</label>
                                <textarea id="qaQuestion" class="textarea-field" rows="4" required placeholder="What are director duties under Companies Ordinance?"></textarea>
                                <small class="form-hint">Ask any legal question - we'll research and validate the answer</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <span class="btn-text">‚ùì Ask & Validate</span>
                                    <span class="btn-loading" style="display: none;"><span class="spinner"></span> Running workflow...</span>
                                </button>
                                <button type="button" class="btn btn-secondary clear-workflow">Clear</button>
                            </div>
                        </form>
                        <div id="simpleQAResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Multi-Agent Research Workflow -->
                    <div class="agent-content" id="workflow-multi_research">
                        <div class="agent-header">
                            <h3>üîç Multi-Agent Research</h3>
                            <p>5-step workflow: Legal + HR + CS Research ‚Üí Analysis ‚Üí Synthesis</p>
                        </div>
                        <form id="multiResearchForm" class="form">
                            <div class="form-group">
                                <label for="researchTopic">Research Topic *</label>
                                <textarea id="researchTopic" class="textarea-field" rows="3" required placeholder="e.g., Remote work policies and their legal implications"></textarea>
                                <small class="form-hint">We'll research this from Legal, HR, and CS perspectives</small>
                            </div>
                            <div class="form-group">
                                <label for="researchHRContext">HR Context (Optional)</label>
                                <textarea id="researchHRContext" class="textarea-field" rows="4" placeholder="Current HR policies or context..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="researchCSContext">CS Context (Optional)</label>
                                <textarea id="researchCSContext" class="textarea-field" rows="4" placeholder="Customer feedback or support context..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <span class="btn-text">üî¨ Run Research Workflow</span>
                                    <span class="btn-loading" style="display: none;"><span class="spinner"></span> Running workflow...</span>
                                </button>
                                <button type="button" class="btn btn-secondary clear-workflow">Clear</button>
                            </div>
                        </form>
                        <div id="multiResearchResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Workflow Builder -->
                    <div class="agent-content" id="workflow-builder">
                        <div class="agent-header">
                            <h3>üõ†Ô∏è Workflow Builder - Create Custom Workflows</h3>
                            <p>Build multi-agent workflows without coding - Drag, Drop, Configure!</p>
                        </div>

                        <!-- Builder Modes -->
                        <div class="agent-tabs" style="margin-bottom: 20px;">
                            <button class="agent-tab-btn active" data-builder-mode="create">‚ûï Create New</button>
                            <button class="agent-tab-btn" data-builder-mode="manage">üìã Manage Workflows</button>
                        </div>

                        <!-- Create New Workflow Mode -->
                        <div id="builder-create-mode" class="builder-mode active">
                            <form id="workflowBuilderForm" class="form">
                                <!-- Workflow Basic Info -->
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                                    <h4 style="margin-top: 0; color: #333;">üìù Workflow Information</h4>

                                    <div class="form-group">
                                        <label for="builderWorkflowId">Workflow ID *</label>
                                        <input type="text" id="builderWorkflowId" class="input-field" required
                                               placeholder="e.g., my_custom_workflow"
                                               pattern="[a-z0-9_]+"
                                               title="Lowercase letters, numbers, and underscores only">
                                        <small class="form-hint">Unique identifier (lowercase, underscores only)</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="builderWorkflowName">Workflow Name *</label>
                                        <input type="text" id="builderWorkflowName" class="input-field" required
                                               placeholder="e.g., My Custom Legal Check">
                                    </div>

                                    <div class="form-group">
                                        <label for="builderWorkflowDesc">Description</label>
                                        <textarea id="builderWorkflowDesc" class="textarea-field" rows="2"
                                                  placeholder="What does this workflow do?"></textarea>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="builderCategory">Category</label>
                                            <select id="builderCategory" class="input-field">
                                                <option value="general">General</option>
                                                <option value="legal">Legal</option>
                                                <option value="hr">HR</option>
                                                <option value="cs">Customer Service</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="builderTags">Tags (comma-separated)</label>
                                            <input type="text" id="builderTags" class="input-field"
                                                   placeholder="e.g., compliance, validation, legal">
                                        </div>
                                    </div>
                                </div>

                                <!-- Workflow Steps Builder -->
                                <div style="background: #fff; border: 2px solid #e0e0e0; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                        <h4 style="margin: 0; color: #333;">üîó Workflow Steps</h4>
                                        <button type="button" id="addWorkflowStep" class="btn btn-secondary" style="font-size: 14px;">
                                            ‚ûï Add Step
                                        </button>
                                    </div>

                                    <div id="workflowStepsContainer">
                                        <!-- Steps will be added here dynamically -->
                                    </div>

                                    <div id="noStepsMessage" style="text-align: center; padding: 40px; color: #999;">
                                        <p style="font-size: 18px;">üì≠ No steps yet</p>
                                        <p>Click "Add Step" to build your workflow</p>
                                    </div>
                                </div>

                                <!-- Input Schema Builder -->
                                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                        <h4 style="margin: 0; color: #333;">üì• Input Fields (What the user provides)</h4>
                                        <button type="button" id="addInputField" class="btn btn-secondary" style="font-size: 14px;">
                                            ‚ûï Add Input Field
                                        </button>
                                    </div>

                                    <div id="inputFieldsContainer">
                                        <!-- Input fields will be added here -->
                                    </div>

                                    <div id="noInputMessage" style="text-align: center; padding: 20px; color: #999; font-size: 14px;">
                                        No input fields defined yet. Click "Add Input Field" to define user inputs.
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary" id="saveWorkflowBtn">
                                        <span class="btn-text">üíæ Create Workflow</span>
                                        <span class="btn-loading" style="display: none;"><span class="spinner"></span> Creating...</span>
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="clearBuilder">üóëÔ∏è Clear All</button>
                                    <button type="button" class="btn btn-secondary" id="previewWorkflow">üëÅÔ∏è Preview JSON</button>
                                </div>
                            </form>

                            <!-- Preview Modal -->
                            <div id="jsonPreviewModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; padding: 40px;">
                                <div style="background: white; max-width: 800px; margin: 0 auto; padding: 30px; border-radius: 8px; max-height: 90vh; overflow-y: auto;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                        <h3 style="margin: 0;">üìÑ Workflow JSON Preview</h3>
                                        <button id="closePreview" class="btn btn-secondary">‚úñ Close</button>
                                    </div>
                                    <pre id="jsonPreviewContent" style="background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 12px; line-height: 1.5;"></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Manage Workflows Mode -->
                        <div id="builder-manage-mode" class="builder-mode" style="display: none;">
                            <div style="margin-bottom: 20px;">
                                <button id="refreshWorkflowList" class="btn btn-primary">üîÑ Refresh List</button>
                            </div>

                            <div id="workflowListContainer">
                                <p style="text-align: center; color: #999; padding: 40px;">
                                    Click "Refresh List" to load workflows
                                </p>
                            </div>
                        </div>

                        <!-- Result Messages -->
                        <div id="builderResult" class="result-panel" style="display: none; margin-top: 20px;"></div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Text Generation -->
            <div class="tab-content" id="generate-tab">
                <div class="panel">
                    <h2>üí¨ AI Text Generation</h2>
                    <p class="panel-desc">Direct LLM text generation without RAG or agents</p>

                    <form id="generateForm" class="form">
                        <div class="form-group">
                            <label for="systemPrompt">System Prompt (Optional)</label>
                            <input
                                type="text"
                                id="systemPrompt"
                                class="input-field"
                                placeholder="You are a Hong Kong legal expert specializing in contract law..."
                            >
                        </div>

                        <div class="form-group">
                            <label for="prompt">Prompt *</label>
                            <textarea
                                id="prompt"
                                class="textarea-field"
                                rows="4"
                                required
                                placeholder="Example: What are the essential elements of a valid employment contract in Hong Kong?"
                            ></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="maxTokens">Max Tokens</label>
                                <input
                                    type="number"
                                    id="maxTokens"
                                    class="input-field"
                                    value="500"
                                    min="50"
                                    max="4096"
                                >
                            </div>

                            <div class="form-group">
                                <label for="temperature">Temperature (0-1)</label>
                                <input
                                    type="number"
                                    id="temperature"
                                    class="input-field"
                                    value="0.3"
                                    min="0"
                                    max="1"
                                    step="0.1"
                                >
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="generateBtn">
                                <span class="btn-text">Generate Response</span>
                                <span class="btn-loading" style="display: none;">
                                    <span class="spinner"></span> Generating...
                                </span>
                            </button>
                            <button type="button" class="btn btn-secondary" id="clearGenerate">Clear</button>
                        </div>
                    </form>

                    <div id="generateResult" class="result-panel" style="display: none;">
                        <div class="result-header">
                            <h3>AI Response</h3>
                            <div class="result-meta" id="generateMeta"></div>
                        </div>
                        <div class="result-content" id="generateResponse"></div>
                        <div class="result-stats" id="generateStats"></div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Models -->
            <div class="tab-content" id="models-tab">
                <div class="panel">
                    <h2>ü§ñ Available Models</h2>
                    <p class="panel-desc">View all models available in your Ollama instance</p>

                    <button class="btn btn-primary" id="refreshModels">
                        <span class="btn-text">üîÑ Refresh Models</span>
                    </button>

                    <div id="modelsResult" class="models-grid" style="margin-top: 20px;">
                        <p class="text-muted">Click "Refresh Models" to load available models</p>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Documentation -->
            <div class="tab-content" id="docs-tab">
                <div class="panel">
                    <h2>üìö API Documentation</h2>

                    <div class="docs-section">
                        <h3>Quick Links</h3>
                        <div class="quick-links">
                            <a href="http://localhost:8000/docs" target="_blank" class="link-card">
                                üìñ Interactive API Docs (Swagger)
                            </a>
                            <a href="http://localhost:8000/redoc" target="_blank" class="link-card">
                                üìö ReDoc Documentation
                            </a>
                            <a href="http://localhost:6333/dashboard" target="_blank" class="link-card">
                                üîç Qdrant Vector DB Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Vault AI Platform v2.0.0 - Multi-Domain Agentic AI System</p>
            <p class="footer-meta">Model: <span id="currentModel">Loading...</span> | API: <span id="apiVersion">v2.0.0</span> | <a href="/docs" target="_blank">API Docs</a></p>
        </footer>
    </div>

    <script src="static/js/app.js"></script>
    <script src="static/js/workflow-builder.js"></script>
    <script src="static/js/custom-workflows.js"></script>
</body>
</html>
