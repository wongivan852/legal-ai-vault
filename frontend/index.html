<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vault AI Platform - Multi-Domain Agentic AI</title>
    <link rel="stylesheet" href="static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-logo-section">
                    <img src="static/images/deepbase-logo.jpg" alt="Deepbase Logo" class="header-logo">
                    <div class="header-text">
                        <h1>ü§ñ Vault AI Platform</h1>
                        <p class="subtitle">Multi-Domain Agentic AI Platform - Legal | HR | Customer Service | Analysis</p>
                    </div>
                </div>
                <div class="health-status" id="healthStatus">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Checking status...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="agents">ü§ñ AI Agents</button>
                <button class="tab-btn" data-tab="workflows">üîÑ Workflows</button>
                <button class="tab-btn" data-tab="generate">üí¨ Text Generation</button>
                <button class="tab-btn" data-tab="models">ü§ñ Models</button>
                <button class="tab-btn" data-tab="docs">üìö API Docs</button>
            </div>

            <!-- Tab Content: AI Agents -->
            <div class="tab-content active" id="agents-tab">
                <div class="panel">
                    <h2>ü§ñ AI Agents - Specialized Domain Experts</h2>
                    <p class="panel-desc">Select an agent below to interact with specialized AI assistants</p>

                    <!-- Agent Sub-Tabs -->
                    <div class="agent-tabs">
                        <button class="agent-tab-btn active" data-agent="legal">‚öñÔ∏è Legal Research</button>
                        <button class="agent-tab-btn" data-agent="hr">üë• HR Policy</button>
                        <button class="agent-tab-btn" data-agent="cs">üí¨ Customer Service</button>
                        <button class="agent-tab-btn" data-agent="analysis">üìä Analysis</button>
                        <button class="agent-tab-btn" data-agent="synthesis">üîó Synthesis</button>
                        <button class="agent-tab-btn" data-agent="validation">‚öñÔ∏è Legal Validation</button>
                    </div>

                    <!-- Legal Research Agent -->
                    <div class="agent-content active" id="legal-agent">
                        <div class="agent-header">
                            <h3>‚öñÔ∏è Legal Research Agent</h3>
                            <p>Search 1,699 HK ordinances and get legal research assistance</p>
                        </div>
                        <form id="legalAgentForm" class="form">
                            <div class="form-group">
                                <label for="legalQuestion">Legal Question *</label>
                                <textarea
                                    id="legalQuestion"
                                    class="textarea-field"
                                    rows="4"
                                    required
                                    placeholder="Example: What are the director duties under the Companies Ordinance?"
                                ></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="legalAgentBtn">
                                    <span class="btn-text">üîç Research Legal Question</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Researching...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearLegal">Clear</button>
                            </div>
                        </form>
                        <div id="legalAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- HR Policy Agent -->
                    <div class="agent-content" id="hr-agent">
                        <div class="agent-header">
                            <h3>üë• HR Policy Agent</h3>
                            <p>Get answers about HR policies, benefits, and employee procedures</p>
                        </div>
                        <form id="hrAgentForm" class="form">
                            <div class="form-group">
                                <label for="hrQuestion">HR Question *</label>
                                <textarea
                                    id="hrQuestion"
                                    class="textarea-field"
                                    rows="3"
                                    required
                                    placeholder="Example: How many vacation days do employees get after 3 years?"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="hrContext">Policy Context (Optional)</label>
                                <textarea
                                    id="hrContext"
                                    class="textarea-field"
                                    rows="6"
                                    placeholder="Paste your HR policy documents here. Example:&#10;&#10;VACATION POLICY: New employees receive 10 days. After 1 year: 15 days. After 3 years: 20 days. After 5 years: 25 days. Vacation requests require 2 weeks advance notice and manager approval."
                                ></textarea>
                                <small class="form-hint">üí° Tip: Paste your employee handbook or policy documents here for accurate answers</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="hrAgentBtn">
                                    <span class="btn-text">üíº Get HR Answer</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Analyzing policy...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearHR">Clear</button>
                            </div>
                        </form>
                        <div id="hrAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Customer Service Agent -->
                    <div class="agent-content" id="cs-agent">
                        <div class="agent-header">
                            <h3>üí¨ Customer Service Agent</h3>
                            <p>Get support answers based on your documentation and FAQs</p>
                        </div>
                        <form id="csAgentForm" class="form">
                            <div class="form-group">
                                <label for="csQuestion">Support Question *</label>
                                <textarea
                                    id="csQuestion"
                                    class="textarea-field"
                                    rows="3"
                                    required
                                    placeholder="Example: How do I reset my password?"
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="csContext">Support Documentation (Optional)</label>
                                <textarea
                                    id="csContext"
                                    class="textarea-field"
                                    rows="6"
                                    placeholder="Paste your support documentation or FAQs here. Example:&#10;&#10;PASSWORD RESET: 1. Go to login page 2. Click Forgot Password 3. Enter your email 4. Check email for reset link (valid 24 hours) 5. Click link and create new password 6. Password must be 8+ characters with uppercase, lowercase, and numbers."
                                ></textarea>
                                <small class="form-hint">üí° Tip: Paste FAQs, user guides, or troubleshooting docs for better answers</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="csAgentBtn">
                                    <span class="btn-text">üé´ Get Support Answer</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Finding solution...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearCS">Clear</button>
                            </div>
                        </form>
                        <div id="csAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Analysis Agent -->
                    <div class="agent-content" id="analysis-agent">
                        <div class="agent-header">
                            <h3>üìä Analysis Agent</h3>
                            <p>Extract insights, trends, and actionable recommendations from text</p>
                        </div>
                        <form id="analysisAgentForm" class="form">
                            <div class="form-group">
                                <label for="analysisText">Text to Analyze *</label>
                                <textarea
                                    id="analysisText"
                                    class="textarea-field"
                                    rows="8"
                                    required
                                    placeholder="Example: Q4 2024 Performance Summary: Revenue increased 25% to $5.2M compared to Q3. New product line contributed $2.1M (40% of revenue). Expanded to APAC, EU, and LATAM markets. Customer retention improved from 65% to 78%..."
                                ></textarea>
                            </div>
                            <div class="form-group">
                                <label for="analysisFocus">Analysis Focus (Optional)</label>
                                <input
                                    type="text"
                                    id="analysisFocus"
                                    class="input-field"
                                    placeholder="Example: Identify key performance indicators and trends"
                                >
                                <small class="form-hint">üí° Tip: Specify what you want to focus on (e.g., "trends", "risks", "opportunities")</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="analysisAgentBtn">
                                    <span class="btn-text">üìà Analyze</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Analyzing...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearAnalysis">Clear</button>
                            </div>
                        </form>
                        <div id="analysisAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Synthesis Agent -->
                    <div class="agent-content" id="synthesis-agent">
                        <div class="agent-header">
                            <h3>üîó Synthesis Agent</h3>
                            <p>Combine information from multiple sources into comprehensive insights</p>
                        </div>
                        <form id="synthesisAgentForm" class="form">
                            <!-- Auto-Retrieve Toggle -->
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="synthesisAutoRetrieve" style="width: 20px; height: 20px; cursor: pointer;">
                                    <span style="font-weight: 600;">üîç Auto-retrieve documents from Legal Database</span>
                                </label>
                                <small class="form-hint">üí° Enable to automatically search and retrieve relevant legal documents from the 1,699 HK ordinances database</small>
                            </div>

                            <!-- Auto-Retrieve Options (shown when toggle is enabled) -->
                            <div id="synthesisAutoRetrieveOptions" style="display: none; padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label for="synthesisQueries">Search Queries *</label>
                                    <textarea
                                        id="synthesisQueries"
                                        class="textarea-field"
                                        rows="3"
                                        placeholder="Enter search queries (one per line). Example:&#10;director duties in Hong Kong&#10;company secretary responsibilities&#10;corporate governance requirements"
                                    ></textarea>
                                    <small class="form-hint">üí° Enter multiple search queries to find relevant sections from different legal topics</small>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="synthesisTopK">Documents per Query</label>
                                        <input
                                            type="number"
                                            id="synthesisTopK"
                                            class="input-field"
                                            value="5"
                                            min="1"
                                            max="20"
                                        >
                                        <small class="form-hint">How many documents to retrieve per query</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="synthesisMinScore">Min Relevance Score</label>
                                        <input
                                            type="number"
                                            id="synthesisMinScore"
                                            class="input-field"
                                            value="0.6"
                                            min="0"
                                            max="1"
                                            step="0.05"
                                        >
                                        <small class="form-hint">Minimum similarity score (0-1, higher = stricter)</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Manual Source Input (hidden when auto-retrieve is enabled) -->
                            <div id="synthesisManualSources">
                                <div class="form-group">
                                    <label>Source Documents *</label>
                                    <div id="synthesisSourcesContainer">
                                        <div class="synthesis-source">
                                            <input type="text" class="input-field source-title" placeholder="Source 1 Title (e.g., Customer Survey)" required>
                                            <textarea class="textarea-field source-content" rows="4" placeholder="Source 1 Content" required></textarea>
                                        </div>
                                        <div class="synthesis-source">
                                            <input type="text" class="input-field source-title" placeholder="Source 2 Title (e.g., App Store Reviews)" required>
                                            <textarea class="textarea-field source-content" rows="4" placeholder="Source 2 Content" required></textarea>
                                        </div>
                                        <div class="synthesis-source">
                                            <input type="text" class="input-field source-title" placeholder="Source 3 Title (e.g., Support Tickets)">
                                            <textarea class="textarea-field source-content" rows="4" placeholder="Source 3 Content (optional)"></textarea>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-secondary" id="addSource" style="margin-top: 10px;">+ Add Another Source</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="synthesisFocus">Synthesis Focus (Optional)</label>
                                <input
                                    type="text"
                                    id="synthesisFocus"
                                    class="input-field"
                                    placeholder="Example: Create comprehensive product improvement plan"
                                >
                                <small class="form-hint">üí° Tip: What should the synthesis focus on? (e.g., "action items", "common themes")</small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="synthesisAgentBtn">
                                    <span class="btn-text">üîó Synthesize</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Synthesizing...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearSynthesis">Clear</button>
                            </div>
                        </form>
                        <div id="synthesisAgentResult" class="result-panel" style="display: none;"></div>
                    </div>

                    <!-- Validation Agent -->
                    <div class="agent-content" id="validation-agent">
                        <div class="agent-header">
                            <h3>‚úÖ Legal Validation Agent</h3>
                            <p>Verify accuracy of legal content against Hong Kong ordinances and check legal compliance</p>
                        </div>

                        <!-- Warning Banner -->
                        <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: flex-start; gap: 10px;">
                                <span style="font-size: 24px;">‚öñÔ∏è</span>
                                <div>
                                    <strong style="color: #856404; font-size: 16px;">Legal Content Validation Only</strong>
                                    <p style="margin: 8px 0 0 0; color: #856404; line-height: 1.5;">
                                        This agent validates <strong>legal content</strong> (policies, contracts, legal claims) against Hong Kong ordinances.
                                        <br><strong>Not suitable for:</strong> Financial reports, business data, or non-legal content.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- What to Validate Section -->
                        <div style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 15px; margin-bottom: 20px; border-radius: 4px;">
                            <strong style="color: #1976D2;">‚úì Good Content to Validate:</strong>
                            <ul style="margin: 10px 0 0 20px; line-height: 1.8; color: #1565C0;">
                                <li><strong>Employee Handbooks</strong> - Check compliance with Employment Ordinance</li>
                                <li><strong>Privacy Policies</strong> - Verify against PDPO (Personal Data Privacy Ordinance)</li>
                                <li><strong>Contract Clauses</strong> - Validate legal accuracy of agreements</li>
                                <li><strong>Legal Claims</strong> - Check statements about HK law are correct</li>
                                <li><strong>Compliance Documents</strong> - Verify regulatory compliance</li>
                            </ul>
                        </div>

                        <form id="validationAgentForm" class="form">
                            <div class="form-group">
                                <label>Legal Content to Validate *</label>
                                <small class="form-hint" style="display: block; margin-bottom: 10px; color: #666;">
                                    üìù Enter legal content (policies, contracts, legal claims) to check against HK ordinances
                                </small>
                                <div id="validationDocsContainer">
                                    <div class="validation-doc">
                                        <input type="text" class="input-field doc-title" placeholder="Document Title (e.g., Employee Leave Policy)" required>
                                        <textarea class="textarea-field doc-content" rows="6" placeholder="Example: Employees are entitled to 7 days of annual leave after 12 months of service. Leave must be approved by supervisor 2 weeks in advance. Unused leave expires annually." required></textarea>
                                    </div>
                                    <div class="validation-doc" style="display: none;">
                                        <input type="text" class="input-field doc-title" placeholder="Document 2 Title (Optional)">
                                        <textarea class="textarea-field doc-content" rows="6" placeholder="Document 2 Content (optional)"></textarea>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary" id="addValidationDoc" style="margin-top: 10px;">+ Add Another Document</button>
                            </div>

                            <!-- Legal Examples -->
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                                <strong style="color: #495057;">üí° Example Legal Content:</strong>
                                <div style="margin-top: 10px; font-family: monospace; font-size: 13px; line-height: 1.6; color: #495057;">
                                    <details style="margin-bottom: 8px;">
                                        <summary style="cursor: pointer; color: #2196F3; font-weight: 500;">‚ñ∂ Privacy Policy Clause</summary>
                                        <div style="background: white; padding: 10px; margin-top: 5px; border-radius: 4px;">
                                            "We retain personal data for 7 years as required by Hong Kong law. Data is stored securely and only accessed by authorized personnel."
                                        </div>
                                    </details>
                                    <details style="margin-bottom: 8px;">
                                        <summary style="cursor: pointer; color: #2196F3; font-weight: 500;">‚ñ∂ Employment Contract Clause</summary>
                                        <div style="background: white; padding: 10px; margin-top: 5px; border-radius: 4px;">
                                            "Employee is entitled to statutory holidays, 7 days annual leave after 12 months, and sick leave as per Employment Ordinance."
                                        </div>
                                    </details>
                                    <details>
                                        <summary style="cursor: pointer; color: #2196F3; font-weight: 500;">‚ñ∂ Director Duties Statement</summary>
                                        <div style="background: white; padding: 10px; margin-top: 5px; border-radius: 4px;">
                                            "Company directors must act in good faith, exercise reasonable care and skill, and avoid conflicts of interest under Cap. 622."
                                        </div>
                                    </details>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="validationFocus">Validation Focus (Optional)</label>
                                <input
                                    type="text"
                                    id="validationFocus"
                                    class="input-field"
                                    placeholder="Example: Check compliance with Employment Ordinance (Cap. 57)"
                                >
                                <small class="form-hint">üí° Specify which ordinance or aspect to focus on (e.g., "PDPO compliance", "Cap. 622 accuracy")</small>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" id="validationAgentBtn">
                                    <span class="btn-text">‚öñÔ∏è Validate Legal Content</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Validating against HK ordinances...
                                    </span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="clearValidation">Clear</button>
                            </div>
                        </form>
                        <div id="validationAgentResult" class="result-panel" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Workflows -->
            <div class="tab-content" id="workflows-tab">
                <div class="panel">
                    <h2>üîÑ Multi-Agent Workflows</h2>
                    <p class="panel-desc">Pre-built workflows orchestrating multiple agents</p>

                    <div style="margin-top: 20px;">
                        <h3>Available Workflows</h3>
                        <div class="quick-links">
                            <div class="link-card">
                                <strong>üë• HR Onboarding</strong>
                                <p>Complete employee onboarding with personalized guides</p>
                            </div>
                            <div class="link-card">
                                <strong>üí¨ CS Ticket Response</strong>
                                <p>Intelligent ticket handling with sentiment analysis</p>
                            </div>
                            <div class="link-card">
                                <strong>‚öñÔ∏è Legal-HR Compliance</strong>
                                <p>Cross-domain compliance checking</p>
                            </div>
                            <div class="link-card">
                                <strong>üí° Simple Q&A</strong>
                                <p>Question answering with validation</p>
                            </div>
                            <div class="link-card">
                                <strong>üîç Multi-Agent Research</strong>
                                <p>Comprehensive multi-perspective analysis</p>
                            </div>
                        </div>
                        <p style="margin-top: 20px; text-align: center;">
                            <a href="/docs#/Workflows" target="_blank" class="btn btn-primary">View Workflow API Documentation ‚Üí</a>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Text Generation -->
            <div class="tab-content" id="generate-tab">
                <div class="panel">
                    <h2>üí¨ AI Text Generation</h2>
                    <p class="panel-desc">Direct LLM text generation without RAG or agents</p>

                    <form id="generateForm" class="form">
                        <div class="form-group">
                            <label for="systemPrompt">System Prompt (Optional)</label>
                            <input
                                type="text"
                                id="systemPrompt"
                                class="input-field"
                                placeholder="You are a Hong Kong legal expert specializing in contract law..."
                            >
                        </div>

                        <div class="form-group">
                            <label for="prompt">Prompt *</label>
                            <textarea
                                id="prompt"
                                class="textarea-field"
                                rows="4"
                                required
                                placeholder="Example: What are the essential elements of a valid employment contract in Hong Kong?"
                            ></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="maxTokens">Max Tokens</label>
                                <input
                                    type="number"
                                    id="maxTokens"
                                    class="input-field"
                                    value="500"
                                    min="50"
                                    max="4096"
                                >
                            </div>

                            <div class="form-group">
                                <label for="temperature">Temperature (0-1)</label>
                                <input
                                    type="number"
                                    id="temperature"
                                    class="input-field"
                                    value="0.3"
                                    min="0"
                                    max="1"
                                    step="0.1"
                                >
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="generateBtn">
                                <span class="btn-text">Generate Response</span>
                                <span class="btn-loading" style="display: none;">
                                    <span class="spinner"></span> Generating...
                                </span>
                            </button>
                            <button type="button" class="btn btn-secondary" id="clearGenerate">Clear</button>
                        </div>
                    </form>

                    <div id="generateResult" class="result-panel" style="display: none;">
                        <div class="result-header">
                            <h3>AI Response</h3>
                            <div class="result-meta" id="generateMeta"></div>
                        </div>
                        <div class="result-content" id="generateResponse"></div>
                        <div class="result-stats" id="generateStats"></div>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Models -->
            <div class="tab-content" id="models-tab">
                <div class="panel">
                    <h2>ü§ñ Available Models</h2>
                    <p class="panel-desc">View all models available in your Ollama instance</p>

                    <button class="btn btn-primary" id="refreshModels">
                        <span class="btn-text">üîÑ Refresh Models</span>
                    </button>

                    <div id="modelsResult" class="models-grid" style="margin-top: 20px;">
                        <p class="text-muted">Click "Refresh Models" to load available models</p>
                    </div>
                </div>
            </div>

            <!-- Tab Content: Documentation -->
            <div class="tab-content" id="docs-tab">
                <div class="panel">
                    <h2>üìö API Documentation</h2>

                    <div class="docs-section">
                        <h3>Quick Links</h3>
                        <div class="quick-links">
                            <a href="http://localhost:8000/docs" target="_blank" class="link-card">
                                üìñ Interactive API Docs (Swagger)
                            </a>
                            <a href="http://localhost:8000/redoc" target="_blank" class="link-card">
                                üìö ReDoc Documentation
                            </a>
                            <a href="http://localhost:6333/dashboard" target="_blank" class="link-card">
                                üîç Qdrant Vector DB Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Vault AI Platform v2.0.0 - Multi-Domain Agentic AI System</p>
            <p class="footer-meta">Model: <span id="currentModel">Loading...</span> | API: <span id="apiVersion">v2.0.0</span> | <a href="/docs" target="_blank">API Docs</a></p>
        </footer>
    </div>

    <script src="static/js/app.js"></script>
</body>
</html>
